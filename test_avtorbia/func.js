var pt="";
var KAN=1;
var KV9=0;
var Kol_ris_str=-1;
var TimeMax;
//var isIE=true;
var Ahroma="  style=\"filter: chroma(color='white');\"";
var scr_r=screen.width;
var scr_D=screen.height;
var scr_K=scr_r/800;
//scr_K=1;
var KAN99=1;
var Wak_P=false;
var tema;
var SSS_sum=0;
var windowOpened;
var S_nm=new Array();
var S_tema=new Array();
var S_hhhh=new Array();
var Priz_radio=new Array();
var Priznak_z=new Array();
var Mat_ogid=new Array();
var Sr_kv_otkl=new Array();
var Sima_v=new Array();
var N_min_v=new Array();
var N_max_v=new Array();
//var Bas_kol=new Array(401);
var BBB=new Array();
var dd;
document.write(kobra(dalj));
for(jkkk=0; jkkk<400; jkkk++){
                       BBB[jkkk]=1; 
                      // Bas_kol["tema"+jkkk]=-100;
                                   }
var Kategoria=new Array();
var K_zaoth=0;
var LLL=0;
var KODDD=new Array();
var kod_time=true;
var KV=0;
var Mas_check=new Array(10);
var no_error=true;
var PRIZ=new Array();
var bok_v=new Array( );
//for(i=0;i<Kol_v;i++)  bok_v[i]=0;
var otladka=false;
var Q1="";
var K_ris=0;//÷èñëî âîïðîñîâ â ÁÄ
var kod;
var Priz_vopros=true;
var kod_otv=true;
var   priz_otv_no=true;
var SSS_in=0;
var SSS_end=0;
var S_b_s=0;
var Numb_vv=0;
var Sumn=0;
var Inok_dd=new Array();
var NUMB_tec=0;
var stime=0; //âðåìÿ îòâåòîâ â ñåêóíäàõ
var timestr;
var minutes=TimeMax-1;
var seconds=0;
var Zadav_v=1;
var Zad_p=1;
var rang_otv=new Array( Kol_v);
var popytka=1;
var Numb_v=new Array(); 
var kpu=-1;// êîëè÷åñòâî òåì
var KD=0;
var KZ=0;
var sstt="status=no;help=no;dialogHeight='55pt'; dialogWidth='111pt'";
var Peremesh=new Array();
var Kol_zaoth=new Array();
var Kol_dnevn=new Array();
var KVS;
var Font_size=Math.round(Font_size_vo/100*19*scr_K);
var Z0=new Array();
var no = 25; // garlaryn sany
var speed = 50; // garlaryn tizligi
var snowflake;
var Max_razdel=10;
var Max_vopros=200;
var skelet=21;
var Max_otvet=30;
var DDD=new Date();
var T_Second; var T_Minute; var T_Hours; var T_Date; var T_Month; var T_Year; 
MM=wwww(D_bbb).split(".");
NNNN=DDD.getMonth(); var NN0=DDD.getDate(); var NN1=NNNN+1; var NN2=DDD.getYear(); 
CH_=wwww(CH_);  if(NN2<=MM[2])if(NN1<=MM[1])if(NN0<MM[0]) ; else CH_="_";var kod_V;
if(NNNN==11||NNNN<2) kod_V=1;if(NNNN>=2 && NNNN<5) kod_V=2;if(NNNN>=5 && NNNN<8) kod_V=3;if(NNNN>=8 && NNNN<11) kod_V=4;
if(kod_V<=2) {var k_a=0.6; var k_s=0; var k_b=0.02;} else {var k_a=0.1; var k_s=0.1; var k_b=0.1;}
W_35=wwww(W_35); //W_36=wwww(W_36);

W_37=wwww(W_37);
var dxx = new Array();
var dxy = new Array();
var xpx = new Array();
var ypx = new Array();
var amx = new Array();
var amy = new Array();
var stxx = new Array();
var stxy = new Array();
var styx = new Array();
var s_a=10; var s_b=5;
var K_V_R_d=new Array();
var K_V_R_z=new Array();
var Kol_razd_v=new Array();
var gg=true;
var ph=0;
var phh=0;
var kod_l=false;
alert("eeeeeeeeeeeeee");
function WWWWW(){ alert('1234567890');
}

function OW(fileNo){
var left0=0; 
var top0=0;
mybody.background='fun.jpg';
var ggg="";
if(fileNo==1) ggg="Block/test_z";
if(fileNo==2) ggg="Block/test_d";
var fileName=ggg+".html";
ST="no";
if(windowOpened){testWindow.focus();}
   else{  
         S_height=screen.height-30;
         S_width=screen.width-10;
	testWindow=open(fileName,"displayWindow","width="+ S_width +
            ",height="+S_height+",scrollbars=yes, status="+
           ST+", location=no, toolbar=no,menubar=no,left=left0,top=top0");
	windowOpened=false;
	}
}

function wwwww(WW,tema)
{
WW2=WW;  WW1=""; k999=WW2.length; 
for(i999=0; i999<k999; i999++){   kk999=QQQ[tema].indexOf(WW2.charAt(i999));
                      if(kk999>=0) WW1+=QQ[tema].charAt(kk999); else WW1+=WW2.charAt(i999); 
                                }
return WW1;
}

function rasp_v_razd(zaothnoe){
var R=new Array();
for(i=0;i<Max_razdel;i++) {R[i]=i+1; Kol_razd_v[i]=0;}
for(i=0;i<Max_razdel;i++){
     fn=Math.random()*(Max_razdel-2-i);
     n=i+Math.floor(fn)+1;
     if(n<=i) n=i; mm=Max_razdel-1;// mm=Max_razdel-1-i; 
     if(n>=mm) n=mm; 
     nnm=R[i];   
     R[i]=R[n];
     R[n]=nnm;
                        }
kkk=0;
for(kp=1;kp<=Glob_kol_v;kp++){
for(i=1;i<=Max_razdel;i++){if( Name_razdel[R[i-1]]!=null)
          if(zaothnoe){if(Kol_razd_v[R[i-1]]<K_V_R_z[R[i-1]] &&
                 kkk<Glob_kol_v) {Kol_razd_v[R[i-1]]++; kkk++;}}
            else { if(Kol_razd_v[R[i-1]]<K_V_R_d[R[i-1]] &&
               kkk<Glob_kol_v){ Kol_razd_v[R[i-1]]++; kkk++;}}  
                                }
                              }
 }





function sneg(){
var snowflake=new Array();
if(kod_V==1) {
 snowflake[0] = "../sneg.gif";
snowflake[1] = "../sneg.gif";
snowflake[2] = "../sneg.gif";
snowflake[3] = "../sneg.gif";
snowflake[4] = "../sneg.gif";
                     }
if(kod_V==2) {
        snowflake[0] = "../flower0.gif";
        snowflake[1] = "../flower1.gif";
         snowflake[2] = "../flower2.gif";
         snowflake[3] = "../flower0.gif";
         snowflake[4] = "../flower2.gif";
            }
if(kod_V==3){ 
        snowflake[0] = "../sun0.gif";
       snowflake[1] = "../sun1.gif";
       snowflake[2] = "../sun2.gif";
       snowflake[3] = "../sun3.gif";
       snowflake[4] = "../sun4.gif";
}
if(kod_V==4) {
 snowflake[0] = "../list.gif";
snowflake[1] = "../list.gif";
snowflake[2] = "../list.gif";
snowflake[3] = "../list.gif";
snowflake[4] = "../list.gif";
                      }
doc_width = document.body.clientWidth;
doc_height = document.body.clientHeight;
for (i = 0; i < no;  i++) {  
dxx[i] = 0;
dxy[i] = 0;       
ypx[i] =Math.round( Math.random()*doc_height);
amx[i] = Math.random()*40;
if(kod_V==4) amy[i] = Math.random()*70;
ikk= Math.round( Math.random()*4.5-0.5);
if(ikk>4) ikk=4;
if(ikk<0) ikk=0;
xpx[i] = Math.round(Math.random()*(doc_width-amx[i] -30)); 

document.write("<div id=\"dot"+i+"\" style=\"position:absolute;\">");
document.write("<img src=\""+snowflake[ikk]+"\" width=20 height=20></div>");
if(isIE){
document.getElementById("dot"+i).style.pixelTop = ypx[i];
document.getElementById("dot"+i).style.pixelLeft = xpx[i];
}
else{
document.getElementById("dot"+i).style.top = ypx[i];
document.getElementById("dot"+i).style.left = xpx[i];
}
     
                        }
snowIE();
}




function snowIE() { 
for (i = 0; i < no; ++ i) { 
styx[i] = k_a +k_s* Math.random();
if(kod_V==2) ypx[i] -= styx[i]; else ypx[i] += styx[i];
if ((kod_V==1 || kod_V>=3) && ypx[i] > doc_height-30 || kod_V==2 && ypx[i] <0) 
                                {
      if(kod_V==2) ypx[i] = doc_height; else ypx[i] =0;
      dxx[i] = 0;  dxy[i] = 0;  
      amx[i] = Math.random()*40; 
      if(kod_V==3) amy[i] = Math.random()*70; 
      xpx[i] = Math.round(Math.random()*(doc_width-amx[i]-30));
                                            }

stxx[i] = k_b + Math.random()/10;
if(kod_V==4) {stxy[i] = k_b + Math.random()/10; dxy[i] += stxy[i];}
dxx[i] += stxx[i];

dd=ypx[i] ;
if(kod_V==4) dd+=Math.round(amy[i]*Math.sin(dxy[i]));
//if(dd<0) dd=ypx[i];
if(isIE){
document.getElementById("dot"+i).style.pixelTop = dd;
document.getElementById("dot"+i).style.pixelLeft = xpx[i] + Math.round(amx[i]*Math.sin(dxx[i]));
}
else{
document.getElementById("dot"+i).style.top = dd;
document.getElementById("dot"+i).style.left = xpx[i] + Math.round(amx[i]*Math.sin(dxx[i]));
}
    //alert(dd);
}
setTimeout("snowIE()", speed);
}

document.write(wwww(W_111));


function medio(){ document.SD.width+=10; document.SD.height+=10; 
if(document.SD.width<200) setTimeout("medio()",2);
                            }


function setT(z){
//var kodd;
//if(z==1) kodd=kod;
//if(z==2) kodd=priz_otv_no;
//if(z==3) kodd=kod_otv;
if(!kod_l&&kod) setTimeout("setT(z)",100);
}

function trans0(){
//alert("trans_0");
tema="tema"+Numb_tema; kod=true; Kol_zaoth[tema]=0; Kol_dnevn[tema]=0;
var xx1=0;
 var xx2=0;
 var nn3=mas[tema].length;
for(i=0;i<mas[tema].length;i++)
  {
xx1+=mas[tema][i][2];
xx2+=mas[tema][i][2]*mas[tema][i][2];
   }
Mat_ogid[tema]=xx1/nn3;
//alert("888888888          "+nn3);
Sr_kv_otkl[tema]=Math.sqrt(Math.abs((xx2-xx1*xx1/nn3)/(nn3-1)));
//alert("888888888          "+Sr_kv_otkl[tema]);
for(i=1;i<=mas[tema].length+1&& kod;i++) 
       {
kodd=true;
 for(ii=0;ii<mas[tema].length;ii++){
                                         if(Math.abs(mas[tema][ii][0])==i)  if(mas[tema][ii][1]==0 || mas[tema][ii][0]<0) kodd=false;}
if(kodd){
Priz_vopros=true;
        if(vnutr) DD=""; else {DD=tema+"/";if(Y_razdel) DD="../"+DD;}
        if(mas_PHP[tema]!=null){ 
                 kod=false;
          if(mas_PHP[tema].length>0) 
                  for(jk=0;jk<mas_PHP[tema].length; jk++)    if(mas_PHP[tema][jk][0]==i)  if(mas_PHP[tema][jk][1]==1) kod=true;
             K_ris=i-1; }
       else{
        kod=true;
        kod_l=false;
        document.img_G.src=DD+Numb_tema+"vopros"+i+".gif"; 
        setT(1);
            }  
         if(kod){Kol_dnevn[tema]+=1;}
                 else {    
       if(mas_PHP[tema]!=null){ 
                 kod=false;
          if(mas_PHP[tema].length>0) 
                  for(jk=0;jk<mas_PHP[tema].length; jk++)     if(mas_PHP[tema][jk][0]==i)  if(mas_PHP[tema][jk][1]==2) kod=true;
             K_ris=i-1; }
       else{
                                kod=true;
                                kod_l=false;
                               document.img_G.src=DD+Numb_tema+"vopros"+i+"_$.gif";
                                setT(1);  
             }
                               if(kod){Kol_zaoth[tema]+=1; Kol_dnevn[tema]+=1;}
                                    else{if(mas[tema]!=null){
                                        for(ii=0;ii<mas[tema].length;ii++){
                                         if(Math.abs(mas[tema][ii][0])==i)  {if(mas[tema][ii].length<=3){alert("â ìàññèâå âîïðîñ "+i+" íå ñîäåðæèò äàííûõ"); no_error=false;}
                                                               else  { Q1=mas[tema][ii][3]; Q1=wwwww(Q1,tema);
                                 if(Q1.charAt(0)!="+" && Q1.charAt(0)!="-" && Q1.charAt(0)!="*" &&  !(Q1.charAt(0)>=0 && Q1.charAt(0)<=9))
                                                                                     { kod=true;
                                                                                         if(Q1.charAt(0)=="$")  {Kol_zaoth[tema]+=1;Kol_dnevn[tema]+=1;} else {Kol_dnevn[tema]+=1;}
                                                                                        
        } }}    }} } }}}
//alert(Kol_zaoth[tema]);
//alert("trans_1");
}


function Raspred_v(Z){
if(Glob_kol_v>0){

phh=ph;
kh=kpu+1;                                 
var K_V=new Array(kh);var Koll_V=new Array(kh);
DS=0;
for(li=0;li<kh;li++) {K_V[li]=0; 
                                   Numb_tema=tema_N[li];
                                   tema="tema"+Numb_tema;
                                  if(Z==0) Koll_V[li]=Kol_zaoth[tema];  else Koll_V[li]=Kol_dnevn[tema];
                                   DS+=Koll_V[li];
                                  }
var kodd=true;
var G_v= Glob_kol_v;
if(G_v>DS) G_v=DS;
while(kodd){
if(kh<= G_v) {for(li=0;li<=kpu;li++) {if(K_V[li]<Koll_V[li]) { K_V[li]+=1; G_v-=1;}} }
  else {var K_VV=new Array(kpu+1);
             for(li=0;li<=kpu;li++) K_VV[li]=li+1;                                                    
                                                  for(i=0;i<=kpu;i++){
                                                  fn=Math.random()*(kpu+1-i);
                                                  n=i+Math.floor(fn);
                                                  if(n<=i) n=i; mm=kpu; //mm=kpu-i;
                                                   if(n>=mm) n=mm; 
                                                 nnm=K_VV[i];   
                                                  K_VV[i]=K_VV[n];
                                                  K_VV[n]=nnm;
           khh=true                                                                  }
           while(khh){khh=false;
           for(li=0;li<=kpu;li++) if(G_v>=1) if(K_V[K_VV[li]-1]<Koll_V[K_VV[li]-1]) {K_V[K_VV[li]-1]+=1;khh=true; G_v-=1;}
                                 } 
           kodd=false;
           }

}

//alert(kpu);

for(li=0;li<=kpu;li++){ l=tema_N[li];     Kol_v["tema"+l]=K_V[li];  }
     }
for(li=0;li<=kpu;li++){ l=tema_N[li]; 
                                      if(Kol_v["tema"+l]>Koll_V[li]) Kol_v["tema"+l]=Koll_V[li];
                                        ph+=Kol_v["tema"+l];
                                        Sima_v["tema"+l]=Mat_ogid["tema"+l]*Kol_v["tema"+l];
                                       // alert("111111111      "+Sima_v["tema"+l]);
                                       N_min_v["tema"+l]=Math.round(Sima_v["tema"+l]/(Mat_ogid["tema"+l]+Sr_kv_otkl["tema"+l]));
                                    //       alert("00000          "+Mat_ogid["tema"+l]);
		           if(N_min_v["tema"+l]<1) N_min_v["tema"+l]=1;
                                      var g66=Mat_ogid["tema"+l]-Sr_kv_otkl["tema"+l];
                                       if(g66<1) g66=1;
		           N_max_v["tema"+l]=Math.round(Sima_v["tema"+l]/g66);
                                   //   alert("222222           "+ N_max_v["tema"+l]);        


                                        if(!zaothnoe) {  
                                           //      if(N_max_v["tema"+l]=="NaN")
                                         //        N_max_v["tema"+l]=1000;
                                         //        alert(N_max_v["tema"+l]);
                                                if(N_max_v["tema"+l]>mas["tema"+l].length) N_max_v["tema"+l]=mas["tema"+l].length;
                                                                
                                                          }
                                        else {   ttt=0;
                                                 
                                                    for(jttt=0; jttt<mas["tema"+l].length; jttt++){
                                                          wee=mas["tema"+l][jttt][3]; wee=wwwww(wee,"tema"+l);
                                                          if(wee.charAt(0)=="$") ttt++;
                                                                                                      }
                                               
                                              if(N_max_v["tema"+l]>ttt) N_max_v["tema"+l]=ttt;
                                                              }
                                   //      alert( Kol_v["tema"+l]);
                                        Kol_v["tema"+l]=  N_max_v["tema"+l];
                                   //      alert( Kol_v["tema"+l]);
                             }
TimeMax=Math.round(ph*TimeMax_v/60); minutes=TimeMax-1;
 //alert(Kol_v["tema1"]);
n_peremesh();
}


function InitRazdel(){
            // if(isIE) 
               ldiv[0].style.visibility="visible";
   // else  ldiv[0].style.visibility="show";
                            }

function G_menu(){
document.write("<div  style=\"visibility:hidden; position:absolute;\" align=center>");
document.write("<table  border=1 bordercolor=blue>");
document.write("<tr>");
document.write("<td bgcolor=00ffff >");
document.write("<h3>Âûáåðèòå ðàçäåë:</h3>");
document.write("<center>");
document.write("<h6><em style='color:green'>ùåëêíèòå ëåâîé êëàâèøåé ìûøè ïî âûáðàííîìó ðàçäåëó</em></h6>");
document.write("</center>");
document.write("<center>");
document.write("<table  border=1 bordercolor=red>");
document.write("<tr>");
document.write("<td bgcolor=ffdddd >");
NF=0; nv="";
for(jm=1;jm<=Max_razdel;jm++){
if(Name_razdel[jm]!=null){ nv=Name_razdel[jm]; NF+=1;Nu_razdel=jm;
document.write("<a class=\"gg\" href=\"Javascript:gohR("+jm+")\"><em style='font-size:14; font-style:normal'>"+nv+"</em></a>");
                          }
   }
if(NF==0) Nu_razdel=-1; else if(NF>1) Nu_razdel=0; 
document.write("</td></tr>");
document.write("</table>");
document.write("</center>");
document.write("</td></tr>");
document.write("</table>");
document.write("</div>");
ldiv[0].style.left=150;  ldiv[0].style.top=70;

}

function parol($r){
document.write("<div  style=\"visibility:hidden; position:absolute;\" align=center>");
document.write("<form name=\"abc\" method = \"post\"  action =\"../parol.php\" >");
document.write("<input type=password onChange=\"document.abc.submit();\" ");
document.write("</form>");
document.write("</div>");
ldiv[$r].style.left=250;  ldiv[$r].style.top=170;
         }

function razd(){
SS=location.href;
N=SS.length-16;
for(i=1;i<Max_razdel;i++){
                           if(i<10) K=1; else {if(i<100) K=2; else {if(i<1000) K=3; else K=4;}}
                           ch=SS.substr(N-K,K);
                           if(ch==i) Numb_razdel=i;
                                }}



function shapka(Name,N,TR){
//alert("shapka_0");
document.write("<div style=\"visibility:hidden; position:absolute;\">");
if(vnutr) DD="../"; else{ DD="";if(Y_razdel) DD="../"+DD;}
document.write("<img name=img_G src=\""+DD+"aaa.gif\" onerror=\"No_ris(Priz_vopros)\" onload=\"Load()\"><br>");
Kol_ris_str++;
document.write("</div>");
document.write("<center>");
document.write("<span class=\"testHeader\">");
document.write("<FORM name=\"clock\">");
if(TR) SS="òðåíèðîâî÷íûé"; else SS="";
j77=Math.round(17*scr_K);
document.write("<b style='font-size:"+j77+"'>"+Name+" (òåñò  "+N+" óðîâíÿ "+SS+")___________</b>");
document.write(" <INPUT ID='i33'class=\"clock\" type=\"text\" name=\"time\" style='font-size:"+j77+"' value=\"\">");
document.write("</FORM>");
document.write("</span>");
document.write("</center>");
//alert("shapka_1");
}

function Load(){kod_l=true;}


function shapka_i(N){
//alert("shapka_i_0");
document.write("<div style=\"visibility:hidden; position:absolute;\">");
document.write("<img name=img_G  src=\"aaa.gif\" onerror=\"No_ris(Priz_vopros)\" onload=\"Load()\"><br>");
Kol_ris_str++; j77=Math.round(17*scr_K);
document.write("</div>");
document.write("<center>");
document.write("<span class=\"testHeader\">");
document.write("<FORM name=\"clock\">");
document.write("<b style='font-size:"+j77+"' ID='b43'>"+testName+" (òåñò  "+N+" óðîâíÿ  (èòîãîâûé êîíòðîëü))___</b>");
document.write(" <INPUT ID='i43'class=\"clock\" type=\"text\" name=\"time\" style='font-size:"+j77+"' value=\"\">");
document.write("</FORM>");
document.write("</span>");
document.write("</center>");
//alert("shapka_i_1");
}

function Bob_d(kog){
// alert(N0_zzz);
if(!No_zzz){
gg=false;
//alert("f_menu_0");
f_menu(false);
//alert("f_menu_1");
trans(); 
if(no_error)
{ for(i=0;i<K_ris;i++){Peremesh[i]=i+1;}
KVS=K_ris;
globa(kog);
 menu_ball();
}}
else {alert(wwww(W_33)); close();}
    }

function gohR(numb){
                                  ldiv[0].style.visibility="hidden";
 location.href="razdel"+numb+"/razdel_ini.html";
                    
 }



function goh(numb){//alert("goh_0");
                                  ldiv[1].style.visibility="hidden";
                                //  alert("goh_0    "+ ldiv[1].style.visibility);
N_tema=tema_N[numb];
DD="";
if(Y_razdel) DD="../";
if(zaothnoe) location.href=DD+"tema"+N_tema+"/tema_z.html";
                       else location.href=DD+"tema"+N_tema+"/tema.html";
 // alert("goh_1");                    
 }

function Prov_tem()
{


for(l=1;l<Max_tem;l++){// alert(Name_tema["tema"+l]);
                                  if(Name_tema["tema"+l]!=null)
                                        {if(Razdel["tema"+l]==Numb_razdel){
                                      kpu++;
                                     if(Kol_v["tema"+l]==null) Kol_v["tema"+l]=0;
                                     tema_N[kpu]=l;
                                          }}}

}

function menu_ball(){
//alert("menu_ball_0");
ww_dd=wwww(W_28);if(KV==0){alert("Ïî òåìå íåò âîïðîñîâ"); close();}
if(document.getElementById('i67'))
{
kf=document.getElementById('i67').length;
//alert("menu_ball_0   "+kf); 
//for(ij=0;ij<kf;ij++) {document.getElementById('i67')[ij].width=Math.round(document.getElementById('i67')[ij].width*scr_K); }
     } ww_ddd=wwww(W_29);
if(S_min!=s_a && S_min!=s_b && !PPP_T)
                 {
              //if(isIE)
                   vis_m="visible";
    // else vis_m="show";
                  } else vis_m="hidden";
document.write("<div  style=\"visibility:"+vis_m+"; position:absolute;\" align=center>");
document.write("<table  border=1 bordercolor=blue>");
document.write("<tr>");
document.write("<td bgcolor=00ffff >");
document.write("<h3>Âûáåðèòå øêàëó îöåíîê:</h3>");
document.write("<center>");
document.write("<h6><em style='color:green'>ùåëêíèòå ëåâîé êëàâèøåé ìûøè ïî âûáðàííîé øêàëå</em></h6>");
document.write("</center>");
document.write("<center>");
document.write("<table width=100% border=1 bordercolor=red>");
document.write("<tr>");
document.write("<td bgcolor=ffdddd >");

document.write("<a  class=\"gg\" href=\"Javascript:go_go(10)\">"+ww_dd+"</a>");
document.write("<a  class=\"gg\" href=\"Javascript:go_go(5)\">"+ww_ddd+"</a>");
   
document.write("</td></tr>");
document.write("</table>");
document.write("</center>");
document.write("</td></tr>");
document.write("</table>");
document.write("</div>");
ldiv[KV+3].style.left=250;  ldiv[KV+3].style.top=70;
 if(S_min==s_a || S_min==s_b || PPP_T ) go_go( S_min);
//alert("menu_ball_1");
itog_test(0);
}

function itog_test(vs){
if(vs==0){ //alert("11111111111");
 var pElements = document.getElementsByTagName("input");
    for (var i = 0; i < pElements.length; i++) {
           if(pElements[i].id=="wyh1") if(s_za && !P_V_V) pElements[i].disabled=true;
  //  +"           if(pElements[i].id==\\\"bt5\\\") pElements[i].disabled=true;
   }

document.write("<div  style=\"visibility:"+"visible"+"; position:absolute; background:#BFCFBF; border-style:ridge; border-color:#558855\">");
document.write("<em style=\"font:30pt Times New Roman bold normal;\">&nbsp&nbsp&nbsp&nbsp&nbspÐåçóëüòàò âûïîëíåíèÿ òåñòà:<\/em>&nbsp&nbsp");
document.write("<input Type=text>");
document.write("<em style=\"font:24pt Times New Roman  normal;\">&nbsp&nbsp&nbspÏðåäìåò:&nbsp&nbsp<\/em>");
document.write("<canvas id=cnv1 width=1200 height=35></canvas>");
document.write("&nbsp&nbsp&nbsp&nbsp<em style=\"font:18pt Times New Roman  normal;\">Ëèìèòèðóåìîå âðåìÿ îòâåòîâ: ");
document.write("<canvas id=cnv2 width=60 height=32></canvas>");
document.write(" ìèíóò <\/em>");

document.write("<canvas id=cnv3 width=600 height=34></canvas><br>");
document.write("&nbsp&nbsp<canvas id=cnv4 width=600 height=32></canvas><br>");
document.write("&nbsp&nbsp<canvas id=cnv5 width=600 height=32></canvas><br>");
document.write("&nbsp&nbsp<canvas id=cnv6 width=600 height=32></canvas><br>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv7 width=600 height=32></canvas><br>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv8 width=600 height=32></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv9 width=250 height=32></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv10 width=460 height=32></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv11 width=600 height=34></canvas><br>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv12 width=600 height=32></canvas><br>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv13 width=270 height=40></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv14 width=290 height=40></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv15 width=130 height=32></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv16 width=200 height=32></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv17 width=200 height=30></canvas><br>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv18 width=120 height=32></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv19 width=60 height=32></canvas>");
document.write("&nbsp&nbsp&nbsp<canvas id=cnv20 width=600 height=32></canvas><br>");
document.write("<\/div");
//alert("222222222222");
ldiv[KV+4].style.width=scr_r-40; ldiv[KV+4].style.height=scr_D-140;
ldiv[KV+4].style.left=10;  ldiv[KV+4].style.top=10;
ldiv[KV+4].style.visibility="hidden";
//alert("33333333333");
             }
else ldiv[KV+4].style.visibility="visible";
}

 function SSS(id,img,str,text,color,pos,fnt){ 
                img.src=str;
         //       alert("11111111111111111");
	img.onload=function(){ run(id,img,text,color,pos,fnt)};
//alert("333333333333333");
	}

 function run(id,img,text,color,pos,fnt){ //alert('123456');
	var ctx=document.getElementById(id).getContext('2d');
	ctx.drawImage(img,0,0);
	ctx.textAlign = "left";
	ctx.font = fnt;
	ctx.fillStyle = color;
	ctx.fillText(text,pos,30);
                         }












function f_menu(vs){
if(gg) if(kpu<0){alert("Ó ðàçäåëà íåò òåì äëÿ òåñòèðîâàíèÿ"); close();}
 if(vs ){
// if(isIE)
       vis_m="visible";
// else  vis_m="show";
          } else vis_m="hidden";
document.write("<div  style=\"visibility:"+vis_m+"; position:absolute;\" align=center>");
document.write("<table  border=1 bordercolor=blue>");
document.write("<tr>");
document.write("<td bgcolor=00ffff >");
document.write("<h3>Âûáåðèòå òåìó òåñòèðîâàíèÿ:</h3>");
document.write("<center>");
document.write("<h6><em style='color:green'>ùåëêíèòå ëåâîé êëàâèøåé ìûøè ïî âûáðàííîé òåìå</em></h6>");
document.write("</center>");
document.write("<center>");
document.write("<table  border=1 bordercolor=red>");
document.write("<tr>");
document.write("<td bgcolor=ffdddd >");
for(jm=0;jm<=kpu;jm++){
nv=tema_N[jm];
NNN=Name_tema["tema"+nv];
document.write("<a  class=\"gg\"  href=\"Javascript:goh("+jm+")\">"+NNN+"</a>");

   }
document.write("</td></tr>");
document.write("</table>");
document.write("</center>");
document.write("</td></tr>");
document.write("</table>");
document.write("</div>");
ldiv[1].style.left=250;  ldiv[1].style.top=70;
//alert("f_menu_vn3");
parol(2);
}






function go_go(sh){
ldiv[KV+3].style.visibility="hidden"; 
//alert("go_go_0"+ldiv[KV+3].style.visibility); 
S_min=sh;
// alert("Íà÷àëî òåñòèðîâàíèÿ"+TimeMax); 
minutes=TimeMax;
clock();
fff_vvv( Zad_p,Zadav_v);
//alert("go_go_1");
}



function globa(ku){
//alert("globa_0");
//document.write("<body id='mybody1' style='background:$ffC0B0'>");
//document.write(wwww(W_67)+wwww(W_40)+wwww(W_41)+wwww(W_66));
nabor_voprosov();
 kpp=0; kii=0;
Sumn=0;
if(Kol_v[tema]>K_ris) Kol_v[tema]=K_ris;  
if(K_ris>0)
for(kp=1;kp<=K_ris; kp++) {
                                     if(ku){ if(Z0[kp]){
                                    if(zaothnoe) {
                                               if(Priznak_z[kp-1]){
                                                             kpp++;
                                                        nn=Numb_v[kp-1];
                                                            nn--;
                                                            nm=PRIZ[nn][0][1]; 
                                                          //    BBB[KV+kpp-1]=1;  
                                                                                                                   
                                                         if(kpp>=N_min_v[tema] && Sumn>=Sima_v[tema]) {BBB[KV+kpp-1]=0; Kol_v[tema]=kpp;  }
                                                         if(BBB[KV+kpp-1]==1) {
                                                       Sumn+=mas[tema][nm][2]; } 
                                                          WW_vv(kp,KV+kpp);
                                                    //      if(BBB[KV+kpp-1]==1) {Numb_tec=0;}
                                                            if(kpp>=N_max_v[tema])
                                                                                                         {
                                                                         // Kol_v[tema]=kpp; 
                                                                                                   kp=K_ris;} 
                                                          }}
                                                    else  { kii++; 
                                                            nn=Numb_v[kp-1];
                                                             nn--;
                                                             nm=PRIZ[nn][0][1];
                                                    //         BBB[KV+kii-1]=1   ;
                                                  if(kii>=N_min_v[tema] && Sumn>=Sima_v[tema]) {BBB[KV+kii-1]=0;  Kol_v[tema]=kii; 
                                                                                       //  kp=K_ris;
                                                                                          } 
                                                  if(BBB[KV+kii-1]==1) {
                                                            
                                                        Sumn+=mas[tema][nm][2];  } 
                                                         WW_vv(kp,KV+kii);
                                                   //alert(Sumn);
                                                 
                                                // if(BBB[KV+kii-1]==1) {NUMB_tec=0;}
                                                       if(kii>=N_max_v[tema])
                                                                                                                 { 
                                                                            // Kol_v[tema]=kii; 
                                                                                         kp=K_ris; }
                                                        }
                                                 }}
                                      else  {kii++; WW_vv(kp,KV+kii);} 
                                              
                         //          alert("âîïðîñ "+Numb_v[kp-1]+" kv="+Kol_v[tema]);
                                    if(otladka){
                ll= Mas_check[kp-1].length; 
                 alert("÷èñëî îòâåòîâ "+ll);
                  for(jr=0;jr<ll;jr++){
                                       kodk=Mas_check[kp-1][jr];  jrr=jr+1;
                                        alert("kod îòâåòà "+jrr+"="+kodk);
                                                                }
                                                }
                              }

KV+=Kol_v[tema];  S_b_s+=Sumn; 
// Bas_kol[tema]=KV;
//for(iu=0; iu<KV; iu++) alert(BBB[iu]);
if(PPP_T) KD+=K_ris; else KD+=K_ris_d;
KZ+=K_ris_z;
//alert("globa_1");
document.write(wwww(W_67)+wwww(W_40)+wwww(W_41)+wwww(W_66));

 }

function wwww1(WW)
{
WW2=WW;  WW1=""; k99=WW2.length; 
for(i99=0; i99<k99; i99++){   kk99=ZZZ.indexOf(WW2.charAt(i99));
                      if(kk99>=0) WW1+=ZZ.charAt(kk99); else WW1+=WW2.charAt(i99); 
                                }
return WW1;
}



function Wak() {  give_mark();
                                 close();
                                  }


function showLayer()
{ 
//alert("showLaye_0");
  ldiv[0].style.left=850;  ldiv[0].style.top=100;
// if(isIE)
 ldiv[0].style.visibility=ldiv[0].style.visibility=="visible"?"hidden":"visible";
//      else  ldiv[0].style.visibility=ldiv[0].style.visibility=="visible"?"hidden":"show"; 
//alert("showLaye_1"+ ldiv[0].style.visibility);
}
 
document.write(wwww(W_114));

function fact(n) {var ww=1; for(ipp=1; ipp<=n; ipp++) ww*=ipp; return ww;}

function trans(){
// alert("trans_0");
tema="tema"+Numb_tema; kod=true;K_zaoth=0;
for(i=1;i<=mas[tema].length +1&& kod;i++) 
       {Z0[i]=true;
 for(ii=0;ii<mas[tema].length;ii++)  if(Math.abs(mas[tema][ii][0])==i)  if(mas[tema][ii][1]==0 || mas[tema][ii][0]<0) {Z0[i]=false; };
Priz_vopros=true;
        if(vnutr) DD=""; else {DD=tema+"/";if(Y_razdel) DD="../"+DD;}
               if(mas_PHP[tema]!=null){ 
                 kod=false;
          if(mas_PHP[tema].length>0) 
                  for(jk=0;jk<mas_PHP[tema].length; jk++)   if(mas_PHP[tema][jk][0]==i)  if(mas_PHP[tema][jk][1]==1) kod=true;
             K_ris=i-1; }
       else{ kod=true;
       kod_l=false;
         document.img_G.src=DD+Numb_tema+"vopros"+i+".gif";
       setT(1);
          }
         if(kod){PRIZ[i-1]=new Array(); PRIZ[i-1][0]=new Array("G",i-1); ogin_s(i);Priznak_z[i-1]=false; }
                 else {   
                if(mas_PHP[tema]!=null){ 
                 kod=false;
         if(mas_PHP[tema].length>0) 
                  for(jk=0;jk<mas_PHP[tema].length; jk++)   if(mas_PHP[tema][jk][0]==i)  if(mas_PHP[tema][jk][1]==2) kod=true;
             K_ris=i-1;}
     else{           kod_l=false;
                             kod=true;
                          document.img_G.src=DD+Numb_tema+"vopros"+i+"_$.gif";
                             setT(1); 
            }
                     //           kod=false;
                                  if(kod){PRIZ[i-1]=new Array(); PRIZ[i-1][0]=new Array("G",i-1); ogin_s(i);Priznak_z[i-1]=true;K_zaoth++;}
                                    else{if(mas[tema]!=null){
                                        for(ii=0;ii<mas[tema].length;ii++){
                                         if(Math.abs(mas[tema][ii][0])==i)  {if(mas[tema][ii].length<=3){alert("â ìàññèâå âîïðîñ "+i+" íå ñîäåðæèò äàííûõ"); no_error=false;}
                                                               else  { Q1=mas[tema][ii][3]; Q1=wwwww(Q1,tema);
                                  if(Q1.charAt(0)!="+" && Q1.charAt(0)!="-" && Q1.charAt(0)!="*" && !(Q1.charAt(0)>=0 && Q1.charAt(0)<=9))
                                                                                     { kod=true; PRIZ[i-1]=new Array(); PRIZ[i-1][0]=new Array("T",ii); 
                                                                                         if(Q1.charAt(0)=="$") {Priznak_z[i-1]=true;K_zaoth++;} else {Priznak_z[i-1]=false;}
                                                                                        ogin_s(i);
                                                                                       }
                                                                                       }}      
                                                                         }
                                      }
                          }
      }
}
 
if(otladka)alert("âîïðîñîâ "+K_ris);
//if(K_ris==0){alert("â áàçå äàííûõ íåò âîïðîñîâ"); no_error=false;}
if(otladka){
                      for(i=1;i<=K_ris;i++){alert("âîïðîñ "+i+": ïðèçíàê âîïðîñà-"+PRIZ[i-1][0]);
                                  for(j=1;j<PRIZ[i-1].length;j++){alert("âîïðîñ "+i+": ïðèçíàê îòâåòà"+j+"-"+PRIZ[i-1][j]);}                                             } 
                                     }
// for(i=1;i<=K_ris;i++) alert("âîïðîñ "+i+"  >>>"+Priznak_z[i-1]);
if(!PPP_T){
for(iuu=0; iuu<mas[tema].length; iuu++){
var  N111=mas[tema][iuu].length-4;
var K111=0;
for(i88=1; i88<=N111; i88++) {  dsd=mas[tema][iuu][i88+3]; dsd=wwwww(dsd,tema); if(dsd.charAt(0)=="+") K111++;}
fd=fact(N111)/(fact(K111)*fact(N111-K111));
mas[tema][iuu][2]=Math.round(mas[tema][iuu][2]*(1+fd/70)*100)/100;
                                                       }
                         }
Kategoria[tema]=new Array();
for(iuu=0; iuu<mas[tema].length; iuu++){
N111=mas[tema][iuu].length-4;
Kategoria[tema][iuu]=1;
for(i88=1; i88<=N111; i88++) {
ggg=mas[tema][iuu][i88+3]; ggg=wwwww(ggg,tema); ggg=ggg.charAt(0);
switch (ggg){
case "+":
case "-": Kategoria[tema][iuu]=1; i88=N111; break;
case "*": Kategoria[tema][iuu]=2; i88=N111; break;
case "0":
case "1":
case "2":
case "3":
case "4":
case "5":
case "6":
case "7":
case "8":
case "9":Kategoria[tema][iuu]=3; i88=N111; break;
                    }
                                           }
                                                          }
//alert("trans_1");
}

function ogin_s(i)
{
                       Priz_vopros=false;
                       kod_otv=true; 
                       kol_otv_p=0;
                        kol_otv_no=0;
                        kol_otv_sp=0;
                        for(j=1;j<Max_otvet&&kod_otv;j++){ 
                        priz_otv_no=true;
                        if(vnutr) DD=""; else{ DD=tema+"/";if(Y_razdel) DD="../"+DD;}
             kod_l=false;
        if(mas_PHP[tema]!=null){ 
                 kod19=true; j44=Math.pow(2,j-1);
          if(mas_PHP[tema].length>0) 
                  for(jk5=0;jk5<mas_PHP[tema].length&&kod19; jk5++)    if(mas_PHP[tema][jk5][0]==i) 
                        if(mas_PHP[tema][jk5][2]>=j)
                                           if((mas_PHP[tema][jk5][3]&j44)==0) {kod19=false;}
if(kod19)    { if(priz_otv_no) {priz_otv_no=false;}  else{ kod_otv=false;} }          
                                             }
       else{         document.img_G.src=DD+Numb_tema+"otvet"+i+"_"+j+".gif";
                        setT(2);
                      }
                        if( priz_otv_no) {kol_otv_no++; PRIZ[i-1][kol_otv_no+kol_otv_p]=new Array("G","NO");}
                                else {
        if(mas_PHP[tema]!=null){ 
                 kod19=true; j44=Math.pow(2,j-1); 
                            if(mas_PHP[tema].length>0) 
                  for(jk5=0;jk5<mas_PHP[tema].length&&kod19; jk5++)    if(mas_PHP[tema][jk5][0]==i) 
                        if(mas_PHP[tema][jk5][2]>=j)
                                           if((mas_PHP[tema][jk5][3]&j44)==j44) kod19=false;
if(kod19)  { if(priz_otv_no) {priz_otv_no=false;}
                                                     else{ kod_otv=false;}}
                                                        }
                              else{ 
                                     kod_l=false;
                                     document.img_G.src=DD+Numb_tema+"otvet"+i+"_"+j+"p.gif";
                                          setT(3);
                                       }
                                  if(kod_otv) {kol_otv_p++ ; PRIZ[i-1][kol_otv_no+kol_otv_p]=new Array("G","PR");}
                                               }
                                                                              }
                                 kodh=false;KP=false;
                                if(mas[tema]!=null){
                                for(iii=0;iii<mas[tema].length;iii++){
                                  if(Math.abs(mas[tema][iii][0])==i) {
                                                 if(mas[tema][iii].length<=1) {alert("â ìàññèâå äëÿ "+i+" âîïðîñà íåò äàííûõ");no_error=false;} else{
                                                 if(mas[tema][iii].length==4) {kodh=true;}
                                                                          else {
                                              for(jj=4;jj<mas[tema][iii].length;jj++){
                                                                Q1=mas[tema][iii][jj]; Q1=wwwww(Q1,tema);
                                if(Q1.charAt(0)=="+")
                  {kol_otv_p++; PRIZ[i-1][kol_otv_no+kol_otv_p+kol_otv_sp]=new Array("T","PR",jj); kodh=true;KP=true;}
                                if(Q1.charAt(0)=="-")
                  {kol_otv_no++; PRIZ[i-1][kol_otv_no+kol_otv_p+kol_otv_sp]=new Array("T","NO",jj);kodh=true;KP=true;}
                                               hjhj=0; if(Q1.charAt(0)=="*") hjhj=1;
                         QQ1=Q1.charAt(0);
                      if(QQ1>="0" && QQ1<="9")
                  {kol_otv_sp++; PRIZ[i-1][kol_otv_no+kol_otv_p+kol_otv_sp]=new Array("T",QQ1,jj); kodh=true;KP=true;}    
                                                                                                   }
                                                                                   }
                                                               }}
                      if(kodh){
                          if(KP)  PRIZ[i-1][0][1]=iii;  iii=mas[tema].length;
                                   }                  
                                           }}
                           if(kol_otv_p==1) {Priz_radio[i-1]=true;} else Priz_radio[i-1]=false;
                           if(otladka)alert("âîïðîñ "+i+"   îòâåòîâ_ð="+kol_otv_p+"; îòâåòîâ_NO="+kol_otv_no);
                            if(kol_otv_p==0 && hjhj==0 && kol_otv_sp==0) {alert("ïî âîïðîñó_"+i+" íåò ïðàâèëèíûõ îòâåòîâ");no_error=false;}
                                                     }


function No_ris(Priz_vopros){
                               if(Priz_vopros){K_ris=i-1; kod=false;}
                                  else { if(priz_otv_no) {priz_otv_no=false;}
                                                     else{ kod_otv=false;}
                                                 }
                                       }
function nabor_voprosov(){K_ris_d=K_ris; K_ris_z=K_zaoth; 
                                                  for(i=0;i<K_ris;i++) if(!Z0[i+1]) {K_ris_d--; if(Priznak_z[i]) K_ris_z--;}
                                                  if(Kol_v[tema]>K_ris_d) Kol_v[tema]=K_ris_d; 
                                                  if( zaothnoe) if(Kol_v[tema]>K_ris_z) Kol_v[tema]=K_ris_z;
                                                 if(s_za)  if( zaothnoe) Kol_v[tema]=K_ris_z; else Kol_v[tema]=K_ris_d;
                                                 if(PPP_T) Kol_v[tema]=K_ris;
                                                  if(s_za){ var YY=Kol_v[tema]; if(!P_V_V) if(Glob_kol_v<YY) YY=Glob_kol_v;
                                                 TimeMax=Math.round(TimeMax_v*YY/60);
                                    //             if(s_za){
                                    //             TimeMax=Math.round(TimeMax_v*Kol_v[tema]/60);
                                                 minutes=TimeMax-1;
                                                                }
                                                   for(i=0;i<K_ris;i++) Numb_v[i]=i+1;
                                                 
                                                    if(!PPP_T){
                                                   for(i=0;i<K_ris-1;i++){n=i+Math.floor(Math.random()*(K_ris-i));
                                                   if(n<=i) n=i;  mm=K_ris-1;//   mm=K_ris-i-1;
                                                    if(n>=mm) n=mm;
                                                   nn=Numb_v[i]; Numb_v[i]=Numb_v[n];Numb_v[n]=nn;
                                                   nn=Priznak_z[i];Priznak_z[i]=Priznak_z[n]; Priznak_z[n]=nn;
                                                   nn=Priz_radio[i]; Priz_radio[i]=Priz_radio[n]; Priz_radio[n]=nn; 
                                                    nn=Z0[i+1]; Z0[i+1]=Z0[n+1]; Z0[n+1]=nn; 
                                                   
                                                                               }
                                                                               }
                                          //       for(i=0;i<K_ris;i++) alert(" "+Numb_v[i]);
                                                      }

function nabor_otvetov(Numb_vopr,Kol_otv){ 
              rang_otv[Numb_vopr-1]=new Array(Kol_otv);
              for(mj=0;mj<Kol_otv;mj++)  {rang_otv[Numb_vopr-1][mj]=mj+1;}
              if(!PPP_T){   
                                                  for(i=0;i<Kol_otv-1;i++){
                                                  fn=Math.random()*(Kol_otv-i);
                                                  n=i+Math.floor(fn);
                                                  if(n<=i) n=i; mm=Kol_otv-1;// mm=Kol_otv-i-1;
                                                   if(n>=mm) n=mm; 
                                                 nnm=rang_otv[Numb_vopr-1][i];   
                                                  rang_otv[Numb_vopr-1][i]=rang_otv[Numb_vopr-1][n];
                                                  rang_otv[Numb_vopr-1][n]=nnm;
              }  } }

function n_peremesh(){
                       KVS=0;

                      for(i=0;i<=kpu;i++)
                            { l=tema_N[i];     KVS+=Kol_v["tema"+l];}
//alert("2      "+KVS);
                
                                                  for(mj=0;mj<KVS;mj++) {Peremesh[mj+phh]=mj+1+phh;}
                                                  if(No_Order_tema && !PPP_T){   
                                                  for(i=0;i<KVS;i++){
                                                  fn=Math.random()*(KVS-i);
                                                  n=i+Math.floor(fn);
                                                  if(n<=i) n=i; mm=KVS-1;//mm=KVS-i-1;
                                                  if(n>=mm) n=mm; 
                                                 nnm=Peremesh[i+phh];   
                                                  Peremesh[i+phh]=Peremesh[n+phh];
                                                  Peremesh[n+phh]=nnm;
                       } } 
}

function wuw_sp(k,nn_v_massive,N_otv_ekran,KN,coll){
N=nn_v_massive+1;
N_ot=rang_otv[k-1][N_otv_ekran-1];
if(coll==2) wr=Math.round(380*scr_K); if(coll==1) wr=Math.round(780*scr_K);
 if(coll==3) wr=Math.round(241*scr_K); if(coll==4) wr=Math.round(174*scr_K);
if(coll==5) wr=Math.round(140*scr_K); if(coll==6) wr=Math.round(115*scr_K);
//alert("<<< "+nn_v_massive+" >>>"+N_ot+"  ïîðÿäîê="+N_otv_ekran);
Gr_or_T=PRIZ[nn_v_massive][N_ot][0];
                                           
if(Gr_or_T=="T"){
                            PR=PRIZ[nn_v_massive][N_ot][1];
                            stt="";
                            mmm=PRIZ[nn_v_massive][N_ot][2];
                             nm=PRIZ[nn_v_massive][0][1]; 
                            s000=mas[tema][nm][mmm]; s000=wwwww(s000,tema);
                            if(PPP_T) stt="value="+s000.charAt(0);
                            s000=s000.substr(1,s000.length-1);
                            s000="<em style='font-style:normal; font-size:"+Font_size+"'>"+s000+"</em>";
Color_otvet11=Color_otvet;
KK_0=s000.search("<span ")+6;
KK_1=s000.indexOf('>',KK_0);
st0=s000.substring(KK_0,KK_1);
//alert("st0=    "+st0);
KK_0=st0.search("background:");
if(KK_0>0)
      {
KK_1=st0.indexOf("'",KK_0);
st0=st0.substring(KK_0+11,KK_1);
Color_otvet11=st0;
        }
                           var j20=Math.round(20*scr_K);    
                          }
document.write("<td width="+j20+" align=right bgcolor=#BFDFBF>");
Mas_check[KN-1][N_otv_ekran-1]=PR;
document.write("<input type=text   size=5 style='font-size:18; Color:red; background-color: yellow' "+stt+" >");
document.write("</td>");
document.write("<td width="+wr+" align=left bgcolor="+Color_otvet11+">");
document.write(s000);
document.write("</td>");
//alert("wuw_sp_1");
 }

function tut_tt(k,nn_v_massive,N_otv_ekran,KN,coll){
//alert("wywod_otveta_0");
N=nn_v_massive+1;
N_ot=rang_otv[k-1][N_otv_ekran-1];
if(coll==2) wr=Math.round(380*scr_K); if(coll==1) wr=Math.round(780*scr_K);
 if(coll==3) wr=Math.round(241*scr_K); if(coll==4) wr=Math.round(174*scr_K);
if(coll==5) wr=Math.round(140*scr_K); if(coll==6) wr=Math.round(115*scr_K);
 if(coll==7) wr=Math.round(100*scr_K); if(coll==8) wr=Math.round(90*scr_K);
if(coll==9) wr=Math.round(80*scr_K); if(coll==10) wr=Math.round(70*scr_K);
if(coll==11) wr=Math.round(60*scr_K); if(coll==12) wr=Math.round(55*scr_K);
if(coll==13) wr=Math.round(50*scr_K); if(coll==14) wr=Math.round(45*scr_K);
if(coll==15) wr=Math.round(40*scr_K);

//alert("<<< "+nn_v_massive+" >>>"+N_ot+"  ïîðÿäîê="+N_otv_ekran);
Gr_or_T=PRIZ[nn_v_massive][N_ot][0];

if(Gr_or_T=="G"){
                   PR=PRIZ[nn_v_massive][N_ot][1];
                   if(PR=="PR") PR="p"; else PR="";
                  stt="";
                   if(PPP_T) if(PR=="p") stt="checked";
                   if(vnutr) DD=""; else {DD=tema+"/";if(Y_razdel) DD="../"+DD;}
                  s000="<img ID='i67' src=\""+DD+Numb_tema+"otvet"+N+"_"+N_ot+PR+".gif\""+Ahroma+">";
                   Kol_ris_str++;
                                                   }
if(Gr_or_T=="T"){
                          PR=PRIZ[nn_v_massive][N_ot][1];
                            if(PR=="PR") PR="p"; else PR="";
                           stt="";
                           if(PPP_T) if(PR=="p") stt="checked";
                            mmm=PRIZ[nn_v_massive][N_ot][2];
                             nm=PRIZ[nn_v_massive][0][1]; 
                            s000=mas[tema][nm][mmm]; s000=wwwww(s000,tema);
                            s000=s000.substr(1,s000.length-1);
                            s000="<em style='font-style:normal; font-size:"+Font_size+"'>"+s000+"</em>";


Color_otvet11=Color_otvet;
//alert(Color_vopros);
KK_0=s000.search("<span ")+6;
KK_1=s000.indexOf('>',KK_0);
st0=s000.substring(KK_0,KK_1);
//alert("st0=    "+st0);
KK_0=st0.search("background:");
if(KK_0>0)
      {
KK_1=st0.indexOf("'",KK_0);
st0=st0.substring(KK_0+11,KK_1);
Color_otvet11=st0;
        }
                           
var j20=Math.round(20*scr_K);  
                                    }

document.write("<td width="+j20+" align=right bgcolor=#BFDFBF>");
 if(PR=="p"){ Mas_check[KN-1][N_otv_ekran-1]=true;} else{ Mas_check[KN-1][N_otv_ekran-1]=false;}
if(Priz_radio[k-1] && !NO_radiobutton) {document.write("<input type=radio  style=' width:30; height:30' name=\"fv\""+stt+" >");}
else{document.write("<input type=checkbox style=' width:30; height:30; background-color:#559933'  "+stt+" >");}
document.write("</td>");
document.write("<td width="+wr+" align=left bgcolor="+Color_otvet11+" >");
//s000="1111111";
document.write(s000);
document.write("</td>");
 }

function block_num(KAN99)
   {
//alert(" block_num_0");
document.write("<div id=\"lay"+KAN99+"\" style=\"visibility:hidden; position:absolute;\" >");
document.write("  "+KAN99);
document.write("</div>");
// alert(" block_num_1");
}




function Prev()
   {
if(Zadav_v>1){
Zad_d=Zadav_v;
Zadav_v--;
KAN99--;
if(Zadav_v>=1){
for(j77=1; j77<100; j77++) {kt=Peremesh[Zadav_v-1]; if(BBB[kt-1]==0) if(Zadav_v>1) Zadav_v--;}
 if(bok_v[Zadav_v-1]==1) { SSS_in--;  kt=Peremesh[Zadav_v-1]; SSS_end-=Inok_dd[kt]; bok_v[Zadav_v-1]=0;}
  fff_sss_pp( Zad_d,Zadav_v);
     }
   }}

function fff_vvv(kkk0,kkk){
if(kkk>=2) { kt=Peremesh[kkk0-1]; ldiv[kt+2].style.visibility="hidden"; } 

if(kkk<=KV){ kt=Peremesh[kkk-1];
                               mmmm=Math.round(10*scr_K);
                               ldiv[kt+2].style.left=mmmm;  ldiv[kt+2].style.top=50*scr_K;
                           //   alert(" formir_vopr_1  "+"   "+kkk+"     "+KV+"    "+ ldiv(kt+2).style.visibility);
                           //   if(isIE)  ldiv[kt+2].style.visibility="visible"; else
                                 ldiv[kt+2].style.visibility="visible";
                        }
}


function fff_sss_pp(kkk0,kkk){
//alert("  formir_vopr_prev_0");
 kt=Peremesh[kkk0-1];
ldiv[kt+2].style.visibility="hidden";
 mmmm=Math.round(10*scr_K); 
  kt=Peremesh[kkk-1];
  ldiv[kt+2].style.left=mmmm;  ldiv[kt+2].style.top=50*scr_K;
// if(isIE)
 ldiv[kt+2].style.visibility="visible";
// else ldiv[kt+2].style.visibility="show";  
//alert("  formir_vopr_prev_1");
}

function Start(){
SSS_in=0;
SSS_end=0;
//alert("KV="+KV);
//for(i=1;i<=5;i++) alert(Peremesh[i-1]);
for(i=1;i<=KV;i++){
nm=S_nm[Peremesh[i-1]-1];
tema1=S_tema[Peremesh[i-1]-1];
//i9=Peremesh[i-1]
//alert("âîïðîñ="+i+"   nm= "+nm);
//alert("nm="+S_nm[0]+S_nm[1]+S_nm[2]+S_nm[3]+S_nm[4]);
//alert("PRIZ="+PRIZ[0][0][1]+PRIZ[1][0][1]+PRIZ[2][0][1]+PRIZ[3][0][1]+PRIZ[4][0][1]);
//nn=Numb_v[i-1];
//alert("i="+i+"   nm="+nn);

//nn=6;
// nn--;
// nm=PRIZ[nn][0][1];

//alert("Êàòåãîðèÿ="+Kategoria[tema1][nm]+"    "+nm);

kt=Peremesh[i-1];
//alert("Ball íà÷àëî 00000");
for(kkR=0; kkR<10,document.forms[kt].elements[kkR].value!="Âûõîä"; kkR++) ;
//alert("Ball íà÷àëî 00001");
//alert(kkR);
if(Kategoria[tema1][nm]==1){
MM= Mas_check[kt-1].length;
kod=true;
for(i_t=1;i_t<=MM;i_t++)
      {   k_B=false;
         kkkp=i_t+kkR;
          if(document.forms[kt].elements[kkkp].checked) k_B=true;
           k_M=Mas_check[kt-1][i_t-1];
           if(otladka)  alert("ïåðåáîð="+k_M+"  "+k_B);
           if(k_B!=k_M ) kod=false;
               }
                                    }
if(Kategoria[tema1][nm]==3){
MM= Mas_check[kt-1].length;
kod=true;
for(i_t=1;i_t<=MM;i_t++)
          {  
         kkkp=i_t+kkR;
         k_M=Mas_check[kt-1][i_t-1];
         k_b=document.forms[kt].elements[kkkp].value;
         if(k_b=="") k_b=0;
          if(k_b!=k_M) kod=false;;
                         }
                                    }


if(Kategoria[tema1][nm]==2){
kod=false; kkkp=kkR+1;
MM=mas[tema1][nm].length;
//alert("MM="+MM);
SY="*"+document.forms[kt].elements[kkkp].value;
//alert("SY="+SY);
if(Ignore) SY=SY.toUpperCase();
SY=str_replace("<","\\<",SY);
SY=str_replace(">","\\>",SY);
SY=str_replace(" ","",SY);

var GGG;
for(i_t=4;i_t<MM;i_t++) {
GGG=mas[tema1][nm][i_t]; GGG=wwwww(GGG,tema1);
//alert("GGG="+GGG);
GGG=str_replace("&lt;","<",GGG);
GGG=str_replace("&gt;",">",GGG);
if(Ignore) GGG=GGG.toUpperCase();
GGG=str_replace(" ","",GGG);
if(SY==GGG) kod=true;
                                     }
                                       }
   if(kod){  SSS_in+=1;
                 SSS_end+=Inok_dd[kt];
               }
}}

document.write(wwww(W_113));

// str_replace("÷òî çàìåíÿåì", "÷åì çàìåíÿåì", "èñõîäíàÿ ñòðîêà")
function str_replace(search, replace, subject) {
    return subject.split(search).join(replace);
}


function kobra(WW)
{
WW2=WW;  WW1=""; k99=WW2.length; 
for(i99=0; i99<k99; i99++){   kk99=ZZZ.indexOf(WW2.charAt(i99));
                      if(kk99>=0) WW1+=ZZ.charAt(kk99); else WW1+=WW2.charAt(i99); 
                                }
return WW1;
}

//alert("fun     "+wwww(W_67)+wwww(W_40)+wwww(W_41)+wwww(W_66));
//document.write(wwww(W_67)+wwww(W_40)+wwww(W_66));
//dS(document.getElementById('mybody1'));
//alert(document.getElementById('mybody1'));


/*	
<!DOCTYPE html>
02
	<meta charset="utf-8">
03
	<title>QQ</title>
04
	<script>
05
	window.onload=function(){
06
	var img=new Image();
07
	img.onload=function(){run()};
08
	img.src='http://javascript.ru/files/u20687/7_1.jpg';
09
	function run(){
10
	var ctx=document.getElementById('cnv').getContext('2d');
11
	ctx.drawImage(img,0,0);
12
	ctx.textAlign = "center";
13
	ctx.font = "20px Arial";
14
	ctx.fillStyle = "white";
15
	ctx.fillText("15 120",50,57);};
16
	}
17
	</script><canvas id=cnv width=500 height=500></canvas>
*/

function WW_vv(k,KN)
{

window.addEventListener('load',function() { setTimeout(function(){ window.scrollTo(0, 1); }, 0);});
//alert("WW_vv0");
var fig=false; j99=Math.round(17*scr_K);
//alert("isIE="+isIE);
nn=Numb_v[k-1];
var kristy;
//nn=6;
 nnn=nn; nn--;
 nm=PRIZ[nn][0][1]; 
coll=mas[tema][nm][1];w_2=wwww(W_2); if(coll<1) coll=1; if(coll>15) coll=15;
Inok_dd[KN]=mas[tema][nm][2];
document.write("<div id=\"layer"+k+"\" style=\"visibility:hidden; position:absolute;\" >");

document.write("<hr align=center width=100% size=2 color=green>");

document.write("<FORM name=\"form"+k+"\">");
document.write("<center>");
j88=Math.round(100*scr_K);
document.write("<table border=0><tr><td width="+j88+">");
if(!s_za) {//document.write("<input id='bt5' type=button class=backButton1 style='font-size:"+j99+"' name=bt1 onClick=Prev() value=\""+w_2+"\">");
           document.write(wwww(W_102)+j99+"' name=bt1 onClick=Prev() value=\""+w_2+"\">");
                    
           }

if(PPP_T) {
                      hj=""; if(!Z0[k]) hj="ÍÅÒ";
                      var wess=mas[tema][nm][2];
                      document.write("<em style='font-size:24; font-style:normal; color:green'>"+wess+"</em><br>"+"<em style='font-style:normal; font-size:33; color:red'>"+coll+"Col<br>"+hj+"</em>");
                                 }
document.write("</td>");




document.write("<td align=center>");
zx=""; j77=Math.round(40*scr_K);
 if(Priznak_z[k-1]) if(PPP_T) zx=wwww(W_101)+j77+"; color:blue' >z</em>" ;
//alert(phh+" : "+KVS);
for(il=phh;il<KVS+phh;il++){if(Peremesh[il]==KN) {KAN=il+1; }}
//alert(KAN);
//var KAN1=0;
//for(i99=1; i99<=KN; i99++) {kt=Peremesh[i99-1];KAN1+=BBB[kt-1];}


j77=Math.round(60*scr_K);j50=Math.round(50*scr_K);j500=Math.round(500*scr_K);
document.write("<table border=3 bordercolor=#44bb77 Cellpadding=5 ><tr><td width="
                              +j50+" align=left bgcolor=#AFCFAF><em style='font-style:normal; font-size:"
                              +j77+"'>");
//for(iww=1; iww<100; iww++) block_num(iww); 
//if(!PPP_T) KAN="";
  s0000=mas[tema][nm][3]; s0000=wwwww(s0000,tema);
Color_vopros11=Color_vopros;
//alert(Color_vopros);
KK_0=s0000.search("<span ")+6;
KK_1=s0000.indexOf('>',KK_0);
st0=s0000.substring(KK_0,KK_1);
//alert("st0=    "+st0);
KK_0=st0.search("background:");
if(KK_0>0)
      {
KK_1=st0.indexOf("'",KK_0);
st0=st0.substring(KK_0+11,KK_1);
Color_vopros11=st0;
        }
//alert(Color_vopros11);

//alert(KAN);
document.write(KAN+zx+wwww(W_100)+j500+" bgcolor="+Color_vopros11+">");




 if(vnutr) DD=""; else{ DD=tema+"/";if(Y_razdel) DD="../"+DD;}
var tttt=tema.substr(4,3);
hhh=mas[tema][nm][2]+Math.round(Number(tttt))*1000+nm*1000000;
if(PRIZ[nn][0][0]=="G") { if(Priznak_z[k-1])  document.write("<img    src=\""+DD+Numb_tema+"vopros"+nnn+"_$.gif\""+Ahroma+">"); 
                                                             else           document.write("<img     src=\""+DD+Numb_tema+"vopros"+nnn+".gif\""+Ahroma+">");
                                                     fig=true;    Kol_ris_str++;    Kol_ris= Kol_ris_str;                       
                                                    }
   else {        s0000=mas[tema][nm][3]; s0000=wwwww(s0000,tema);
         //           s0000=str_replace("&lt;","<"",s0000);
         //           s0000=str_replace("&gt;",">'",s0000);
         //          s0000=str_replace("","<",s0000);
             //      s0000=str_replace("\\>",">",s0000);
             //      s0000=str_replace("\\\\","\\",s0000);
                if(Priznak_z[k-1]) s0000=s0000.substr(1,s0000.length-1);

               document.write(wwww(W_99)+Font_size+"'>"+s0000+wwww(W_81));
           }
document.write(wwww(W_98));
document.write("</td><td width="+j88+" align=center> ");
document.write(wwww(W_89)+j99+wwww(W_97)+wwww(W_1)+"\" "+wwww(W_88));
document.write(wwww(W_98));
document.write("</center><br>");
document.write("<Center>");

if(Kategoria[tema][nm]==1){
document.write("<table border=3 bordercolor=#9FAF9F Cellpadding=5>");
K_otv=PRIZ[nn].length-1; 
N_otv=0;
 Mas_check[KN-1]=new Array(K_otv);
nabor_otvetov(k,K_otv);
document.write("<tr border=3 bordercolor=#9FAF9F Cellpadding=5>"); 
for(J_K=1;J_K<=K_otv;J_K+=coll){
for(NW=1;NW<=coll;NW++){
if(J_K+NW-1<=K_otv){N_otv++;
tut_tt(k,nn,N_otv,KN,coll);
                         } 
                                                }
document.write("</tr>");
               }
document.write("</table><br>");
                                       }

if(Kategoria[tema][nm]==3){
K_otv=PRIZ[nn].length-1; 
N_otv=0;
 Mas_check[KN-1]=new Array(K_otv);
nabor_otvetov(k,K_otv);
document.write(wwww(W_90));
document.write("<table border=3 bordercolor=#9FAF9F Cellpadding=5>");
document.write("<tr border=2 bordercolor=#9FAF9F  Cellpadding=5>");
for(J_K=1;J_K<=K_otv;J_K+=coll){ 
for(NW=1;NW<=coll;NW++){
if(J_K+NW-1<=K_otv){N_otv++;
wuw_sp(k,nn,N_otv,KN,coll);
                                          }
                               }
document.write("</tr>");
                                               }
document.write("</table><br>");
                                       }

if(Kategoria[tema][nm]==2){
document.write("<table border=2 bordercolor=#9FAF9F>");
document.write("<tr border=2 bordercolor=#9FAF9F>");
document.write("<td>");
if(Ignore) uu="<em style='font-style:normal; color:red'>áåç</em> ñîáëþäåíèÿ"; else uu="<em style='font-style:normal;color:red'>ñ</em> ñîáëþäåíèåì";
            document.write("<em style='font-style:normal; color:green; font-size:24'>Ââåäèòå îòâåò "+uu+"  ïðîáåëîâ, ìàëûõ è áîëüøèõ áóêâ:</em><br>");
            document.write("<input type=text onkeypress=\"if(event.keyCode == 13) return false;\" size=56 style='font-size:33; Color:red; background-color:#DDDD88'>");           
document.write("</td>");
document.write("</tr>");   
document.write("</table><br>");
                                   }


document.write(wwww(W_93)+j99+wwww(W_94)+wwww(W_3)+wwww(W_95)+nm+",\""+tema+"\","+hhh+wwww(W_96));
// BB_B("+nm+",\""+tema+"\","+hhh+");
//alert("N_v="+Peremesh[k-1]+"   nm="+nm);
Numb_vv++;
S_nm[Numb_vv-1]=nm; S_tema[Numb_vv-1]=tema; S_hhhh[Numb_vv-1]=hhh;
document.write("</FORM>");
document.write("</div>");
if(fig) {if(document.images[Kol_ris].width>500) document.images[Kol_ris].width=500;
             document.images[Kol_ris].width=Math.round(document.images[Kol_ris].width*scr_K);}
//alert("WW_vv1");
}

  


